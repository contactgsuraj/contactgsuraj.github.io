<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link id="mainStyle" rel="stylesheet" href="./reviews.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,700,400italic">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123574191-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-123574191-1');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="./favicon.png">
    <title>my reviews</title>
</head>

<body class="container ">
    <div class="row ">
        <a href="# " onclick="left() ">
            <div class="col-xs-1 reviewNav " id="left ">
                <div class="affix ">
                    <div class="icon ">
                        <i class="fa fa-chevron-left "></i>
                    </div>
                </div>
            </div>
        </a>
        <div class="col-xs-10 ">
            <div class="tAndO ">Thoughts and Opinions</div>
            <ul>
                <div class="loading ">
                    Loading . . .
                </div>
            </ul>
        </div>
        <a href="# " onclick="right() ">
            <div class="col-xs-1 reviewNav " id="right ">
                <div class="affix ">
                    <div class="icon ">
                        <i class="fa fa-chevron-right "></i>
                    </div>
                </div>
            </div>
        </a>
    </div>
</body>

</html>
<script>
    let lower
    let data
    let upper
    let load = function() {
        var appendage = ''
        for (var i = lower; i < upper; ++i) {
            let curr = data[i]
            let append = '\
            <li class="reviewEntry row ">\
              <div class="details col-md-4 ">\
                  <div class="image ">\
                      <a href=" ' + curr[0] + ' ">\
              <img src=" ' + curr[1] + ' ">\
            </a>\
                  </div>\
                  <div class="artistAlbum ">\
                      <div class="album ">' + curr[2] + '</div>\
                      <div class="artist ">' + curr[3] + '</div>\
                      <div class="date ">' + curr[4] + '</div>\
                  </div>\
              </div>\
              <div class="review col-md-8 ">\
                  <div class="text ">' + curr[5] + '</div>\
                  <div class="forFansOf ">For Fans of: ' + curr[6] + '</div>\
                  <div class="favTracks ">Favourite Tracks: ' + curr[7] + '</div>\
                  <div class="score ">' + curr[8] + '</div>\
              </div>\
          </li>'
            appendage += append
        }
        $("ul ").empty();
        $("ul ").append(appendage);
    }
    let left = function() {
        console.log("LEFTJ ")
        console.log(lower, upper)
        if (lower !== 0) {
            lower -= 5;
            if (upper % 5 === 0) {
                upper -= 5
            } else {
                upper -= (upper % 5)
            }
            console.log(lower, upper)
            load()
        }
    }
    let right = function() {
        console.log("RIGHT ")
        console.log(lower, upper)
        if (upper !== data.length) {
            lower = lower + 5
            upper = Math.min(upper + 5, data.length)
            load()
        }
    }

    $.getJSON("/blog/reviews/reviews.json", function(x) {
        data = x
        lower = 0
        upper = Math.min(data.length, 5)
        load(0, Math.min(data.length, 5))
    })
</script>
